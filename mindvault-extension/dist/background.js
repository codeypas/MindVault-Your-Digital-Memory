const e=globalThis.chrome;e.tabs.onUpdated.addListener((n,s,t)=>{if(s.status==="complete"&&t.url&&!t.url.startsWith("chrome://")){const o={id:Date.now().toString(),url:t.url,title:t.title||"Unknown Title",timestamp:new Date().toISOString(),favicon:t.favIconUrl||null};e.storage.local.get(["websites"],i=>{const l=i.websites||[];l.unshift(o);const a=l.slice(0,100);e.storage.local.set({websites:a})})}});e.runtime.onMessage.addListener((n,s,t)=>{var o,i;if(n.type==="CLIPBOARD_CAPTURED"){const l={id:Date.now().toString(),content:n.content,timestamp:new Date().toISOString(),sourceUrl:((o=s.tab)==null?void 0:o.url)||null,sourceTitle:((i=s.tab)==null?void 0:i.title)||null};e.storage.local.get(["clipboard"],a=>{const r=a.clipboard||[];r.unshift(l);const c=r.slice(0,50);e.storage.local.set({clipboard:c})}),t({success:!0})}});
